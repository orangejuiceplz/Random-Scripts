# ------------------------------------------------------------------------------
# /etc/tlp.conf - TLP user configuration (version 1.8.0)
# See full explanation: https://linrunner.de/tlp/settings
#
# Copyright (c) 2025 Thomas Koch <linrunner at gmx.net> and others.
# SPDX-License-Identifier: GPL-2.0-or-later
#
# Configuration: Maximum Performance on Battery (NVIDIA GPU)
# User: orangejuiceplz
# Date: 2025-10-10
# ------------------------------------------------------------------------------

# Set to 0 to disable, 1 to enable TLP.
TLP_ENABLE=1

# Control how warnings about invalid settings are issued:
#   0=disabled,
#   1=background tasks (boot, resume, change of power source) report to syslog,
#   2=shell commands report to the terminal (stderr),
#   3=combination of 1 and 2
TLP_WARN_LEVEL=3

# Colorize error, warning, notice and success messages.
TLP_MSG_COLORS="91 93 1 92"

# Operation mode when no power supply can be detected: AC, BAT.
#TLP_DEFAULT_MODE=AC

# Operation mode select: 0=depend on power source, 1=always use TLP_DEFAULT_MODE
#TLP_PERSISTENT_DEFAULT=0

# Power supply classes to ignore when determining operation mode: AC, USB, BAT.
#TLP_PS_IGNORE="BAT"

# Seconds laptop mode has to wait after the disk goes idle before doing a sync.
# Non-zero value enables, zero disables laptop mode.
DISK_IDLE_SECS_ON_AC=0
DISK_IDLE_SECS_ON_BAT=0

# Dirty page values (timeouts in secs).
MAX_LOST_WORK_SECS_ON_AC=15
MAX_LOST_WORK_SECS_ON_BAT=15

# Select a CPU scaling driver operation mode.
#CPU_DRIVER_OPMODE_ON_AC=active
#CPU_DRIVER_OPMODE_ON_BAT=active

# Select a CPU frequency scaling governor.
# Set to 'performance' for maximum performance on battery
CPU_SCALING_GOVERNOR_ON_AC=performance
CPU_SCALING_GOVERNOR_ON_BAT=performance

# Set the min/max frequency available for the scaling governor.
#CPU_SCALING_MIN_FREQ_ON_AC=0
#CPU_SCALING_MAX_FREQ_ON_AC=0
#CPU_SCALING_MIN_FREQ_ON_BAT=0
#CPU_SCALING_MAX_FREQ_ON_BAT=0

# Set CPU energy/performance policies EPP and EPB:
# Set to 'performance' for maximum performance on battery
CPU_ENERGY_PERF_POLICY_ON_AC=performance
CPU_ENERGY_PERF_POLICY_ON_BAT=performance

# Set Intel CPU P-state performance: 0..100 (%).
# Maximum performance on both AC and battery
CPU_MIN_PERF_ON_AC=0
CPU_MAX_PERF_ON_AC=100
CPU_MIN_PERF_ON_BAT=0
CPU_MAX_PERF_ON_BAT=100

# Set the CPU "turbo boost" (Intel) or "core performance boost" (AMD) feature:
# Enable turbo boost on battery for maximum performance
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=1

# Set CPU dynamic boost feature:
# Enable for maximum performance on battery
CPU_HWP_DYN_BOOST_ON_AC=1
CPU_HWP_DYN_BOOST_ON_BAT=1

# Kernel NMI Watchdog:
NMI_WATCHDOG=0

# Select platform profile:
# Set to 'performance' for maximum performance on battery
PLATFORM_PROFILE_ON_AC=performance
PLATFORM_PROFILE_ON_BAT=performance

# System suspend mode:
#MEM_SLEEP_ON_AC=s2idle
#MEM_SLEEP_ON_BAT=deep

# Define disk devices on which the following DISK/AHCI_RUNTIME parameters act.
DISK_DEVICES="nvme0n1 sda"

# Disk advanced power management level: 1..254, 255 (max saving, min, off).
# Set to 254 on battery for minimal power saving (better performance)
DISK_APM_LEVEL_ON_AC="254 254"
DISK_APM_LEVEL_ON_BAT="254 254"

# Exclude disk classes from advanced power management (APM):
DISK_APM_CLASS_DENYLIST="usb ieee1394"

# Hard disk spin down timeout:
# Disabled on battery for better performance
DISK_SPINDOWN_TIMEOUT_ON_AC="0 0"
DISK_SPINDOWN_TIMEOUT_ON_BAT="0 0"

# Select I/O scheduler for the disk devices.
DISK_IOSCHED="mq-deadline mq-deadline"

# AHCI link power management (ALPM) for SATA disks:
# Set to max_performance on battery for best performance
SATA_LINKPWR_ON_AC="max_performance"
SATA_LINKPWR_ON_BAT="max_performance"

# Exclude SATA links from AHCI link power management (ALPM).
#SATA_LINKPWR_DENYLIST="host1"

# Runtime Power Management for NVMe, SATA, ATA and USB disks
# Disabled on battery for maximum performance
AHCI_RUNTIME_PM_ON_AC=on
AHCI_RUNTIME_PM_ON_BAT=on

# Seconds of inactivity before disk is suspended.
AHCI_RUNTIME_PM_TIMEOUT=15

# Power off optical drive in UltraBay/MediaBay: 0=disable, 1=enable.
BAY_POWEROFF_ON_AC=0
BAY_POWEROFF_ON_BAT=0

# Optical drive device to power off
BAY_DEVICE="sr0"

# Set the min/max/turbo frequency for the Intel GPU.
# Note: If you have NVIDIA discrete GPU, these may not apply
#INTEL_GPU_MIN_FREQ_ON_AC=0
#INTEL_GPU_MIN_FREQ_ON_BAT=0
#INTEL_GPU_MAX_FREQ_ON_AC=0
#INTEL_GPU_MAX_FREQ_ON_BAT=0
#INTEL_GPU_BOOST_FREQ_ON_AC=0
#INTEL_GPU_BOOST_FREQ_ON_BAT=0

# AMD GPU power management.
# Note: These settings don't apply to NVIDIA GPUs
#RADEON_DPM_PERF_LEVEL_ON_AC=auto
#RADEON_DPM_PERF_LEVEL_ON_BAT=auto

# Dynamic power management method (DPM): balanced, battery, performance.
#RADEON_DPM_STATE_ON_AC=performance
#RADEON_DPM_STATE_ON_BAT=battery

# Display panel adaptive backlight modulation (ABM) level: 0(off), 1..4.
#AMDGPU_ABM_LEVEL_ON_AC=0
#AMDGPU_ABM_LEVEL_ON_BAT=3

# Wi-Fi power saving mode: on=enable, off=disable.
# Disabled on battery for consistent network performance
WIFI_PWR_ON_AC=off
WIFI_PWR_ON_BAT=off

# Disable Wake-on-LAN: Y/N.
WOL_DISABLE=Y

# Enable audio power saving for Intel HDA, AC97 devices (timeout in secs).
# Minimal power saving for better audio performance
SOUND_POWER_SAVE_ON_AC=0
SOUND_POWER_SAVE_ON_BAT=0

# Disable controller too (HDA only): Y/N.
SOUND_POWER_SAVE_CONTROLLER=N

# PCIe Active State Power Management (ASPM):
# Set to performance for maximum PCIe performance (important for NVIDIA GPU)
PCIE_ASPM_ON_AC=performance
PCIE_ASPM_ON_BAT=performance

# Runtime Power Management for PCIe bus devices: on=disable, auto=enable.
# Disabled on battery for maximum performance
RUNTIME_PM_ON_AC=on
RUNTIME_PM_ON_BAT=on

# Exclude listed PCIe device adresses from Runtime PM.
#RUNTIME_PM_DENYLIST="11:22.3 44:55.6"

# Exclude PCIe devices assigned to the listed drivers from Runtime PM.
# Removed 'nouveau' since you're using NVIDIA proprietary driver
RUNTIME_PM_DRIVER_DENYLIST="mei_me xhci_hcd"

# Permanently enable/disable Runtime PM for listed PCIe device addresses
#RUNTIME_PM_ENABLE="11:22.3"
#RUNTIME_PM_DISABLE="44:55.6"

# Set to 0 to disable, 1 to enable USB autosuspend feature.
# Disabled for consistent performance
USB_AUTOSUSPEND=0

# Exclude listed devices from USB autosuspend (separate with spaces).
#USB_DENYLIST="1111:2222 3333:4444"

# Exclude audio devices from USB autosuspend:
USB_EXCLUDE_AUDIO=1

# Exclude bluetooth devices from USB autosuspend:
USB_EXCLUDE_BTUSB=0

# Exclude phone devices from USB autosuspend:
USB_EXCLUDE_PHONE=0

# Exclude printers from USB autosuspend:
USB_EXCLUDE_PRINTER=1

# Exclude WWAN devices from USB autosuspend:
USB_EXCLUDE_WWAN=0

# Allow USB autosuspend for listed devices even if already denylisted or
# excluded above (separate with spaces). Use lsusb to get the ids.
#USB_ALLOWLIST="1111:2222 3333:4444"

# Restore radio device state (Bluetooth, WiFi, WWAN) from previous shutdown
# on system startup: 0=disable, 1=enable.
RESTORE_DEVICE_STATE_ON_STARTUP=0

# Radio devices to disable on startup: bluetooth, nfc, wifi, wwan.
#DEVICES_TO_DISABLE_ON_STARTUP="bluetooth nfc wifi wwan"

# Radio devices to enable on startup: bluetooth, nfc, wifi, wwan.
#DEVICES_TO_ENABLE_ON_STARTUP="wifi"

# Radio devices to enable on AC: bluetooth, nfc, wifi, wwan.
#DEVICES_TO_ENABLE_ON_AC="bluetooth nfc wifi wwan"

# Radio devices to disable on battery: bluetooth, nfc, wifi, wwan.
#DEVICES_TO_DISABLE_ON_BAT="bluetooth nfc wifi wwan"

# Radio devices to disable on battery when not in use (not connected):
#DEVICES_TO_DISABLE_ON_BAT_NOT_IN_USE="bluetooth nfc wifi wwan"

# Battery Care -- Charge thresholds
# Optional: Uncomment these if you want to preserve battery longevity
# (but you mentioned you don't care about battery life)
#START_CHARGE_THRESH_BAT0=75
#STOP_CHARGE_THRESH_BAT0=80

#START_CHARGE_THRESH_BAT1=75
#STOP_CHARGE_THRESH_BAT1=80

# Restore charge thresholds when AC is unplugged: 0=disable, 1=enable.
#RESTORE_THRESHOLDS_ON_BAT=1

# ------------------------------------------------------------------------------
# tlp-rdw - Parameters for the radio device wizard

# Radio devices to disable on connect.
#DEVICES_TO_DISABLE_ON_LAN_CONNECT="wifi wwan"
#DEVICES_TO_DISABLE_ON_WIFI_CONNECT="wwan"
#DEVICES_TO_DISABLE_ON_WWAN_CONNECT="wifi"

# Radio devices to enable on disconnect.
#DEVICES_TO_ENABLE_ON_LAN_DISCONNECT="wifi wwan"
#DEVICES_TO_ENABLE_ON_WIFI_DISCONNECT=""
#DEVICES_TO_ENABLE_ON_WWAN_DISCONNECT=""

# Radio devices to enable/disable when docked.
#DEVICES_TO_ENABLE_ON_DOCK=""
#DEVICES_TO_DISABLE_ON_DOCK=""

# Radio devices to enable/disable when undocked.
#DEVICES_TO_ENABLE_ON_UNDOCK="wifi"
#DEVICES_TO_DISABLE_ON_UNDOCK=""
